<!--
####################################### Bubble Sort_Element ##################################################
#  Question     : Given a random array of size arr_size , and some element X highlighted
#                 An array where some element X is highlighted. 
#		  Everthing to the left of X is sorted (the i smallest elements in the array)
#		  Everything to the right is constrained random (must be bigger than the elements to the left).
#		  Highlighted element needs to be placed in right place by Selection Sort
#  Variables    : arr_size 6 - 10
#  Chapter      : InsetionSort
#  Author       : Gayathri
#  Date         : July 20, 2012
#######################################################################################################
-->

<!DOCTYPE html>
<html data-require="math">

	<head>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <title>Sorting using Selection Sort</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
                <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
                <script src="../JSAV/lib/jquery.transform.light.js"></script>
                <script src="../JSAV/lib/raphael.js"></script>
                <script type="text/javascript"
       src="http://cdn.mathjax.org/mathjax/1.1-latest/MathJax.js?config=http://algoviz.org/OpenDSA/dev/OpenDSA/ODSAkhan-exercises/KAthJax-77111459c7d82564a705f9c5480e2c88.js">
                </script>
                <script>urlBaseOverride = "../ODSAkhan-exercises/";</script>
                <script src="../ODSAkhan-exercises/khan-exercise.js"></script>
                <script src="../JSAV/build/JSAV-min.js"></script>
                <link rel="stylesheet" href="../JSAV/css/JSAV.css" type="text/css" />

		<style>
			.jsavcontainer {
  			border: 0px;
			}
		</style>


	<body>

	<script>
  		var jsav, arr , arr_clone, myGuess, spos, nsel, sel1 ;
  	
		// function to handle a click event on an array
  		var clickHandler = function(index, e) {
			var sublist;
			sublist =0;
			if ( index >= spos)
				sublist = 1;
			if ( sublist == 1 )
			{
				if (nsel === 0) 
				{ // if first click
        				arr.css(index, {"font-size": "130%"});
					nsel = nsel + 1;
					sel1 = index;
				}
    				else {
					arr.swap(sel1,index);
					arr.unhighlight(sel1);
					arr.unhighlight(index);
					arr.highlight(spos);
					arr.css(index, {"font-size": "100%"});
					arr.css(sel1, {"font-size": "100%"});
					nsel = 0;
				}
					
    			}
			myGuess = 1;
  		}

		// function that initialise JSAV library 
  		initJSAV = function(a, sort_pos) {
			var i;
			var j;
			var small;
			myGuess = -1;
			spos = sort_pos;
			nsel = 0;
    			jsav = new JSAV("jsav");
			jsav.recorded();
    			arr = jsav.ds.array(JSAV.utils.rand.numKeys(0, 999, a),{indexed: true, center: false});
			arr_clone = jsav.ds.array(JSAV.utils.rand.numKeys(0, 999, a));
                        arr_clone.hide();
                        for (i=0; i<a; i++)
                        {
                                arr_clone.value(i,arr.value(i));
                        }
			for (i=0; i<sort_pos; i++) {
				small=i;
				for (j=i+1; j<a;j++) {
					if (arr_clone.value(j) < arr_clone.value(small) ) 
						small=j;
				}
				arr_clone.swap(i,small);
			}
                        for (i=0; i<a; i++)
                        {
                                arr.value(i,arr_clone.value(i));
                        }
			arr.highlight(sort_pos);
			// bind the clickHandler to handle click events on the array
			arr.click(clickHandler);
  		}
	

 		// function that validates student's answer 
 		function checkAnswer (a, sort_pos) {
  			var i;
			var j=0;
			var temp;
			var small;
			small=sort_pos;
                                for (j=sort_pos+1; j < a;j++) {
                                        if (arr_clone.value(j) < arr_clone.value(small)) {
                                                small=j;
                                }
                        }
			arr_clone.swap(small,sort_pos);
			// Return false if user has highlighted any position before start_pos
			for (i=0; i < a; i++) {
				if ( arr.value(i) != arr_clone.value(i)) return (2 === 1);
			}
			// All conditions passed, return true
  			return ( 1 === 1);
  		} 


	</script>


	<div class="exercise">
  		<div class="vars">
    			<var id="arr_size">randRange( 6, 10 )</var>
			<var id="sort_pos">randRange(0,arr_size-1)</var>
    			<var id="JSAV">initJSAV(arr_size,sort_pos)</var>
		</div>

  		<div class="problems">
    			<div>
				<p class="problem"> In the array of size <var>arr_size</var>  displayed below , element at position <var>sort_pos</var> is highlighted. The array represents an intermediate state in Selection sort with all elements to its left sorted </p>
      				<div class="question">
				<p> In this array, the highlighted element is the current element to be processed in the next pass of Selection Sort. Show the resulting array after the <var>sort_pos+1</var> iteration in Selection Sort </p>
				<div id="jsav"></div>
      			</div>
      			<div class="solution" data-type="custom">
				<div class="guess">
          				[myGuess]
        			</div>
				<div class="validator-function">
	  				return checkAnswer (arr_size,sort_pos);
				</div>
      			</div>
     
		 	<div class="hints">
				<p> Determine the element which should appear at the index <var>sort_pos</var> using Selection sort </p>
				<p> Selection sort will place the smallest element from index <var>sort_pos</var> to index <var>arr_size-1</var> at index <var>sort_pos</var></p>
      			</div>
    		</div>
  	</div>
</body>
</html>
