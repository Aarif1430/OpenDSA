<?xml version="1.0" encoding="utf8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.13.1 -->
<document ids="summation-techniques" names="summation\ techniques" source="&lt;string&gt;" title="Summation Techniques"><title>Summation Techniques</title><comment xml:space="preserve">This file is part of the OpenDSA eTextbook project. See</comment><comment xml:space="preserve">http://algoviz.org/OpenDSA for more details.</comment><comment xml:space="preserve">Copyright (c) 2012-2013 by the OpenDSA Project Contributors, and</comment><comment xml:space="preserve">distributed under an MIT open source license.</comment><raw format="xml" xml:space="preserve"><avmetadata>null</avmetadata></raw><raw format="xml" xml:space="preserve"><odsalink>AV/Background/SummationOneToNCON.css</odsalink></raw><paragraph>Consider the following simple summation.</paragraph><math_block xml:space="preserve">\sum_{i=1}^n i.</math_block><paragraph>An easy <title_reference>proof by induction &lt;proof by induction&gt;</title_reference>
shows that this summation has the well-known closed form
<math>n(n+1)/2</math>.
But while induction is a good technique for proving that a proposed
closed-form expression is correct,
how do we find a candidate closed-form expression to test in the first
place?
Let us try to think through this problem from first principles,
as though we had never seen it before.</paragraph><paragraph>A good place to begin analyzing a summation it is to give an
estimate of its value for a given <math>n</math>.
Observe that the biggest term for this summation is <math>n</math>,
and there are <math>n</math> terms being summed up.
So the total must be less than <math>n^2</math>.
Actually, most terms are much less than <math>n</math>,
and the sizes of the terms grow linearly.
If we were to draw a picture with bars for the size of the terms,
their heights would form a line, and we could enclose them in a box
<math>n</math> units wide and <math>n</math> units high.
It is easy to see from this that a closer estimate for the summation
is about <math>(n^2)/2</math>.
Having this estimate in hand helps us when trying to determine an
exact closed-form solution, because we will hopefully recognize if our
proposed solution is badly wrong.</paragraph><raw format="xml" xml:space="preserve"><inlineav
    type="ss"
    exer_name="SummationOneToNCON"
    long_name="SummationOneToNCON"
    points="0"
    required="True"
    threshold="1.0">
</inlineav>
</raw><paragraph>Let us now consider some ways that we might hit upon an exact equation
for the closed form solution to this summation.
One particularly clever approach that we can take is to
observe that we can "pair up" the first and last terms,
the second and (<math>n-1</math>)th terms, and so on.
Each pair sums to <math>n+1</math>.
The number of pairs is <math>n/2</math>.
Thus, the solution is <math>n(n+1)/2</math>.
This is pretty, and there is no doubt about it being correct.
The problem is that it is not a useful technique for solving many
other summations.</paragraph><paragraph>Now let us try to come up with something a bit more general.
We already recognized that, because the largest term is <math>n</math> and
there are <math>n</math> terms, the summation is less than <math>n^2</math>.
If we are lucky, the closed form solution is a polynomial.
Using that as a working assumption,
we can invoke a technique called <title_reference>guess-and-test</title_reference>.
We will guess that the closed-form solution for this summation is a
polynomial.
That means that we are guessing that it is of the form
<math>c_1 n^2 + c_2 n + c_3</math> for some constants
<math>c_1</math>, <math>c_2</math>, and <math>c_3</math>.
If this is true, then we can plug in the answers to small cases of the
summation to solve for the coefficients.
For this example, substituting 0, 1, and 2 for <math>n</math> leads to
three simultaneous equations.
Because the summation when <math>n=0</math> is just 0, <math>c_3</math> must
be 0.
For <math>n=1</math> and <math>n=2</math> we get the two equations</paragraph><math_block xml:space="preserve">\begin{eqnarray*}
c_1 + c_2     &amp; = &amp; 1 \\
4 c_1 + 2 c_2 &amp; = &amp; 3,
\end{eqnarray*}</math_block><paragraph>which in turn yield <math>c_1 = 1/2</math> and <math>c_2 = 1/2</math>.
Thus, if the closed-form solution for the summation <strong>is</strong> a polynomial,
then it can only be</paragraph><math_block xml:space="preserve">1/2 n^2 + 1/2 n + 0</math_block><paragraph>which is more commonly written</paragraph><math_block xml:space="preserve">\frac{n(n+1)}{2}.</math_block><paragraph>At this point, we still must do the "test" part of the
guess-and-test approach.
We can use an induction proof to verify whether our
candidate closed-form solution is correct.
In this case it is indeed correct, as shown by
Example <title_reference>Example #SumIEx</title_reference>.
The induction proof is necessary because our initial assumption that
the solution is a simple polynomial could be wrong.
For example, it might have been that the true solution
includes a logarithmic term, such as
<math>c_1n^2 + c_2 n \log n</math>.
The process shown here is essentially fitting a curve to a fixed
number of points.
Because there is always an <math>n</math>-degree polynomial that fits
<math>n+1</math> points, we have not done enough work to be sure that we to
know the true equation without the induction proof.</paragraph><paragraph>Guess-and-test is useful whenever the solution is a polynomial
expression.
In particular, similar reasoning can be used to solve for
<math>\sum_{i=1}^n i^2</math>, or more generally <math>\sum_{i=1}^n i^c</math>
for <math>c</math> any positive integer.
Why is this not a universal approach to solving summations?
Because many summations do not have a polynomial as their closed
form solution.</paragraph><paragraph>A more general approach is based on the
<title_reference>subtract-and-guess</title_reference> or <title_reference>divide-and-guess</title_reference> strategies.
One form of subtract-and-guess is known as the
<title_reference>shifting method</title_reference>.
The shifting method subtracts the summation from a variation on the
summation.
The variation selected for the subtraction should be one that makes
most of the terms cancel out.
To solve sum <math>f</math>, we pick a known function <math>g</math> and find a
pattern in terms of <math>f(n) - g(n)</math> or <math>f(n)/g(n)</math>.</paragraph><topic><title>Example</title><comment xml:space="preserve">Rawlins example</comment><paragraph>Find the closed form solution for <math>\sum_{i=1}^n i</math> using
the divide-and-guess approach.
We will try two example functions to illustrate the
divide-and-guess method: dividing by <math>n</math> and dividing by
<math>f(n-1)</math>.
Our goal is to find patterns that we can use to guess a closed-form
expression as our candidate for testing with an induction proof.
To aid us in finding such patterns, we can construct a table
showing the first few numbers of each function, and the result of
dividing one by the other, as follows.</paragraph><math_block xml:space="preserve">\begin{array}{r|rrrrrrrrrr}
n&amp;1&amp;2&amp;3&amp;4&amp;5&amp;6&amp;7&amp;8&amp;9&amp;10\\
\hline
f(n)&amp;1&amp;3&amp;6&amp;10&amp;15&amp;21&amp;28&amp;36&amp;46&amp;57\\
n&amp;1&amp;2&amp;3&amp;4&amp;5&amp;6&amp;7&amp;8&amp;9&amp;10\\
f(n)/n&amp;2/2&amp;3/2&amp;4/2&amp;5/2&amp;6/2&amp;7/2&amp;8/2&amp;9/2&amp;10/2&amp;11/2\\
f(n\!-\!1)&amp;0&amp;1&amp;3&amp;6&amp;10&amp;15&amp;21&amp;28&amp;36&amp;46\\
f(n)/f(n\!-\!1)&amp;&amp;3/1&amp;4/2&amp;5/3&amp;6/4&amp;7/5&amp;8/6&amp;9/7&amp;10/8&amp;11/9
\end{array}</math_block><paragraph>Dividing by both <math>n</math> and <math>f(n-1)</math> happen to give us
useful patterns to work with.
<math>\frac{f(n)}{n} = \frac{n+1}{2}</math>, and
<math>\frac{f(n)}{f(n-1)} = \frac{n+1}{n-1}</math>.
Of course, lots of other guesses for function <math>g</math> do not
work.
For example, <math>f(n) - n = f(n-1)</math>.
Knowing that <math>f(n) = f(n-1) + n</math> is not useful for
determining the closed form solution to this summation.
Or consider <math>f(n) - f(n-1) = n</math>.
Again, knowing that <math>f(n) = f(n-1) + n</math> is not useful.
Finding the right combination of equations can be like finding a
needle in a haystack.</paragraph><paragraph>In our first example, we can see directly what the closed-form
solution should be.
Since <math>\frac{f(n)}{n} = \frac{n+1}{2}</math>,
obviously <math>f(n) = n(n+1)/2</math>.</paragraph><paragraph>Dividing <math>f(n)</math> by <math>f(n-1)</math> does not give so obvious a
result, but it provides another useful illustration.</paragraph><math_block xml:space="preserve">\begin{eqnarray*}
\frac{f(n)}{f(n-1)} &amp;=&amp; \frac{n+1}{n-1}\\
f(n) (n-1) &amp;=&amp; (n+1) f(n-1)\\
f(n) (n-1) &amp;=&amp; (n+1) (f(n) - n)\\
n f(n) - f(n) &amp;=&amp; n f(n) + f(n) - n^2 - n\\
2 f(n) &amp;=&amp; n^2 + n = n (n+1)\\
f(n) &amp;=&amp; \frac{n (n + 1)}{2}
\end{eqnarray*}</math_block><paragraph>Once again, we still do not have a proof that
<math>f(n) = n(n+1)/2</math>.
Why?
Because we did not prove that <math>f(n)/n = (n+1)/2</math> nor that
<math>f(n)/f(n-1) = (n+1)(n-1)</math>.
We merely hypothesized patterns from looking at a few terms.
Fortunately, it is easy to check our hypothesis with
induction.</paragraph></topic><topic><title>Example</title><paragraph>Solve the summation</paragraph><math_block xml:space="preserve">\sum_{i=1}^n 1/2^i.</math_block><paragraph>We will begin by writing out a table listing the first few values
of the summation, to see if we can detect a pattern.</paragraph><math_block xml:space="preserve">\begin{array}{l|llllll}
n &amp; 1 &amp;2 &amp;3 &amp;4 &amp;5 &amp;6\\
\hline
\\[-10pt]
f(n) &amp; \frac{1}{2} &amp; \frac{3}{4} &amp; \frac{7}{8} &amp; \frac{15}{16}
&amp; \frac{31}{32} &amp; \frac{63}{64} \\[3pt]
\hline
\\[-12pt]
1-f(n) &amp; \frac{1}{2} &amp; \frac{1}{4} &amp; \frac{1}{8} &amp;
\frac{1}{16} &amp; \frac{1}{32} &amp; \frac{1}{64}\\
\end{array}</math_block><paragraph>By direct inspection of the second line of the table,
we might recognize the pattern
<math>f(n) = \frac{2^n-1}{2^n}</math>.
A simple induction proof can then prove that this always holds
true.
Alternatively, consider if we hadn't noticed the pattern for the
form of <math>f(n)</math>.
We might observe that <math>f(n)</math> appears to be reaching an
asymptote at 1.
In which case, we might consider looking at the difference between
<math>f(n)</math> and the expected asymptote.
This result is shown in the last line of the table, which has a clear
pattern since the <math>i</math> th entry is of <math>1/2^i</math>.
From this we can easily deduce a guess that
<math>f(n) = 1 - \frac{1}{2^n}</math>.
Again, a simple induction proof will verify the guess.</paragraph></topic><topic><title>Example</title><paragraph>Solve the summation</paragraph><math_block xml:space="preserve">f(n) = \sum_{i=0}^{n} ar^i = a + ar + ar^2 + \cdots + ar^n.</math_block><paragraph>This is called a geometric series.
Our goal is to find some function <math>g(n)</math> such
that the difference between <math>f(n)</math> and <math>g(n)</math> one from
the other leaves us with an easily manipulated equation.
Because the difference between consecutive terms of the summation
is a factor of <math>r</math>, we can shift terms if we multiply the
entire expression by <math>r</math>:</paragraph><math_block xml:space="preserve">rf(n) = r\sum_{i=0}^{n} ar^i = ar + ar^2 + ar^3 + \cdots + ar^{n+1}.</math_block><paragraph>We can now subtract the one equation from the other, as follows:</paragraph><math_block xml:space="preserve">\begin{eqnarray*}
f(n) - rf(n) = a &amp;+&amp; ar + ar^2 + ar^3 + \cdots + ar^{n}\\
                 &amp;-&amp; (ar + ar^2 + ar^3 + \cdots + ar^n) - ar^{n+1}.
\end{eqnarray*}</math_block><paragraph>The result leaves only the end terms:</paragraph><math_block xml:space="preserve">\begin{eqnarray*}
f(n) - rf(n) &amp; = &amp; \sum_{i=0}^{n} ar^i - r\sum_{i=0}^{n} ar^i.\\
(1-r)f(n)    &amp; = &amp; a - ar^{n+1}.
\end{eqnarray*}</math_block><paragraph>Thus, we get the result</paragraph><math_block xml:space="preserve">f(n) = \frac{a - ar^{n+1}}{1 - r}</math_block><paragraph>where <math>r \neq 1</math>.</paragraph></topic><topic><title>Example</title><comment xml:space="preserve">Manber's example</comment><paragraph>For our second example of the shifting method, we solve</paragraph><math_block xml:space="preserve">f(n) = \sum_{i=1}^{n} i2^i = 1 \cdot 2^1 + 2 \cdot 2^2 + 3 \cdot
2^3 + \cdots + n \cdot 2^n.</math_block><paragraph>We can achieve our goal if we multiply by two:</paragraph><math_block xml:space="preserve">2f(n) = 2\sum_{i=1}^{n} i2^i = 1 \cdot 2^2 + 2 \cdot 2^3 + 3 \cdot
2^4 + \cdots + (n-1) \cdot 2^n + n \cdot 2^{n+1}.</math_block><paragraph>The <math>i</math> th term of <math>2f(n)</math> is <math>i \cdot 2^{i+1}</math>,
while the <math>(i+1)</math> th term of <math>f(n)</math> is
<math>(i+1) \cdot 2^{i+1}</math>.
Subtracting one expression from the other yields the summation of
<math>2^i</math> and a few non-canceled terms:</paragraph><math_block xml:space="preserve">\begin{eqnarray*}
2f(n) - f(n) &amp; = &amp; 2\sum_{i=1}^n i 2^i - \sum_{i=1}^n i 2^i\\
             &amp; = &amp; \sum_{i=1}^n i 2^{i+1} - \sum_{i=1}^n i 2^i.
\end{eqnarray*}</math_block><paragraph>Shift <math>i</math> 's value in the second summation,
substituting <math>(i+1)</math> for <math>i</math>:</paragraph><math_block xml:space="preserve">= n2^{n+1} + \sum_{i=0}^{n-1}i2^{i+1} -
             \sum_{i=0}^{n-1}(i+1)2^{i+1}.</math_block><paragraph>Break the second summation into two parts:</paragraph><math_block xml:space="preserve">=  n2^{n+1} + \sum_{i=0}^{n-1}i2^{i+1} -
              \sum_{i=0}^{n-1}i2^{i+1} -
              \sum_{i=0}^{n-1}2^{i+1}.</math_block><paragraph>Cancel like terms:</paragraph><math_block xml:space="preserve">= n2^{n+1} - \sum_{i=0}^{n-1} 2^{i+1}.</math_block><paragraph>Again shift <math>i</math> 's value in the
summation, substituting <math>i</math> for <math>(i+1)</math>:</paragraph><math_block xml:space="preserve">= n2^{n+1} - \sum_{i=1}^{n} 2^i.</math_block><paragraph>Replace the new summation with a
solution that we already know:</paragraph><math_block xml:space="preserve">= n2^{n+1} - \left ( 2^{n+1} - 2 \right ).</math_block><paragraph>Finally, reorganize the equation:</paragraph><math_block xml:space="preserve">= (n-1)2^{n+1} + 2.</math_block></topic><raw format="xml" xml:space="preserve"><odsascript>AV/Background/SummationOneToNCON.js</odsascript></raw></document>