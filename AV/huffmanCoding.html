<!DOCTYPE html>
<html>
<head>
	<title>OpenDSA Textbook: Huffman Coding Tree</title>
	<meta charset="utf-8" />
	<link href="../JSAV/css/JSAV.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript"
		src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>
	<script  src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
	</script>
	<script  src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js">
	</script>
	<script src="../JSAV/lib/jquery.transform.light.js"></script>
	<script src="../JSAV/lib/raphael.js"></script>
	<script src="../JSAV/build/JSAV-min.js"></script>
	<script src="../JSAV/build/JSAV.js"></script>
</head>
	
<body>
	<div id="av">
		<div class="jsavcontrols"></div>
		<p class="jsavoutput jsavline"></p>
	</div>
	<script>

		// the structure for huffman treeNode
		var treeNode = function (aNumber, aChar, left, right) {
			this.frequency = aNumber;
			this.value = aNumber + "<br />" + aChar;
			this.lchild = left;
			this.rchild = right;

			this.getValue = function() {
				return this.value;
			}
			this.getlchild = function() {
				return this.lchild;
			}
			this.getrchild = function() {
				return this.rchild;
			}
		}

		// sorting the elements of an array with Insertation Sort
		var sortArray = function (anArray) {
			for (var i = 1; i < anArray.length; i++) {
				var key = anArray[i];
				var j = i - 1;
				while(j >= 0 && key < anArray[j]) {
					anArray[j + 1] = anArray[j];
					j--;
				}
				anArray[j + 1] = key;
			}	
		}

		// copy the assigned elements from arrayOne to arrayTwo
		var arrayCopy = function(arrayOne, arrayTwo) {
			for (var i = 2, j = 0; i <= arrayOne.length; i++, j++) {
				arrayTwo[j] = arrayOne[i];
			}
		}
		
		// Constructing the huffmanCodingTree
		var huffTree = function (nArray, kArray){
		
		}

    // traverse to re-set background color of the entire tree
    var traverse_color = function(node, col) {
		var val = node.value();

		// the node is an empty node	
		if (!val || val === "jsavnull") {	
			return;
		} 
		else {
			// if the node is an internal node, then display an circle
			if (node.left()) {
				node.css("background-color", col);
				// var pos = node.edgeToParent().position();
				traverse_color(node.left(),col);
			}
			if (node.right()) {
				node.css("background-color", col);
				traverse_color(node.right(),col);
			}
			// if the node is a leaf node, then display an rectangle
			else
			node.css({"height": "90px", "width": "45px", "border-radius":1});
		}
    }
    
	var jsav = new JSAV("av");
	var bt = jsav.ds.bintree();
	var caption_label = jsav.label("Huffman Coding Tree Construction", {before: bt});
	var caption_text = "";
	jsav.step();	

	bt.root(306);
	bt.root().left(120 + "<bd />" + "E");
	bt.root().right(186);

	bt.root().right().left(79);
	bt.root().right().right(107);

	bt.root().right().left().right(42 + "<br />" + "D");
	bt.root().right().left().left(37 + "<br />" + "U");

	bt.root().right().right().left(42 + "<br />" + "L");
	bt.root().right().right().right(65);

	bt.root().right().right().right().left(32 + "<br />" + "C");
	bt.root().right().right().right().right(33);

	bt.root().right().right().right().right().left(9);
	bt.root().right().right().right().right().right(24 + "<br />" + "M");

	bt.root().right().right().right().right().left().left(2 + "<br />" + "Z");
	bt.root().right().right().right().right().left().right(7 + "<br />" + "K");

	// userArry: an array to store the user input, number and character
	var userArray = new Array();
	userArray[0] = 32;
	userArray[1] = "C";
	userArray[2] = 42;
	userArray[3] = "D";
	userArray[4] = 120;
	userArray[5] = "E";
	userArray[6] = 7;
	userArray[7] = "K"
	userArray[8] = 42;
	userArray[9] = "L"
	userArray[10] = 24;
	userArray[11] = "M";
	userArray[12] = 37;
	userArray[13] = "U";
	userArray[14] = 2;
	userArray[15] = "Z";

	var tmpArray = new Array();
	for (var i = 0; i < userArray.length - 1; i += 2) {
		tmpArray[i] = new treeNode(userArray[i], userArray[i + 1], 0, 0);
		document.write(tmpArray[i].getValue() + "<br />");
	}


	// treeArray: an array to store the information of HuffmanCodingTree
//	var treeArray = new Array(8);
//	for (var i = 0; i < 8; i++) {
//		treeArray[i] = bt.newNode(numArray[i] + "<br />" + keyArray[i]);
//		var index = treeArray[i].value().indexOf("<br />");
//		testArray[i] = treeArray[i].value().substring(0, index);
	//	document.write(testArray[i] + "<br />");
//	}

	/* tesing the sorting fuction
	sortArray(numArray);
	for (var i = 0; i < 8; i++) {
		document.write(numArray[i] + " ");
	}*/

	traverse_color(bt.root(), "white");
	bt.layout();
	
    jsav.recorded(); // done recording changes, will rewind
    
    $(".jsavtreenode").live("hover", function() {
	//console.log($(this).text(), $(this).offset().left, $(this).offset().top);
    });
    $("path").live("hover", function() {
	//console.log($(this).attr("d"));
    });
// end hiding contents from old browsers  -->
    </script>
</body>
